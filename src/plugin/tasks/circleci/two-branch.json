{
  "target": ".circleci/config.yml",
  "strategy": "overwrite",
  "resolve": true,
  "snippets": [
    "base",
    {
      "name": "gally-create-staging-pr",
      "variables": {
        "jobName": "gally-create-pr",
        "dockerImage": "circleci/node:16",
        "ciEnvBranchName": "$CIRCLE_BRANCH"
      }
    },
    {
      "name": "run-yarn-tests",
      "variables": {
        "jobName": "test-node-v18",
        "dockerImage": "circleci/node:18",
        "jobOptions": {
          "requires": [
            "gally-create-pr"
          ]
        }
      }
    },
    {
      "name": "run-yarn-tests",
      "variables": {
        "jobName": "test-node-v16",
        "dockerImage": "circleci/node:16",
        "jobOptions": {
          "requires": [
            "gally-create-pr"
          ]
        }
      }
    },
    {
      "name": "run-yarn-tests",
      "variables": {
        "jobName": "test-node-v20",
        "dockerImage": "cimg/node:20.0",
        "jobOptions": {
          "requires": [
            "gally-create-pr"
          ]
        }
      }
    },
    {
      "name": "dependabot-auto-approve",
      "variables": {
        "jobName": "gally-auto-approve",
        "dockerImage": "circleci/node:16",
        "jobOptions": {
          "requires": [
            "gally-create-pr",
            "test-node-v18",
            "test-node-v16",
            "test-node-v20"
          ],
          "filters": {
            "branches": {
              "only": "/dependabot\\/.*/"
            }
          }
        }
      }
    },
    {
      "name": "semantic-release",
      "variables": {
        "jobName": "release",
        "dockerImage": "circleci/node:16",
        "jobOptions": {
          "requires": [
            "gally-create-pr",
            "test-node-v18",
            "test-node-v16",
            "test-node-v20"
          ],
          "filters": {
            "branches": {
              "only": "master"
            }
          }
        }
      }
    }
  ],
  "requires": [
    "npm",
    "yarn",
    "gally",
    "github",
    "circleci",
    "dependabot",
    "semantic-release"
  ],
  "purpose": [
    "Restrictive two-branch circleci config."
  ]
}
